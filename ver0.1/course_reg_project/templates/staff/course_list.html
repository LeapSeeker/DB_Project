{% extends "base.html" %}

{% block title %}교과목 목록 | 수강신청 시스템{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto; padding: 40px 0;">

  <!-- 뒤로가기 -->
  <a href="{{ url_for('staff_dashboard') }}" 
     style="display:flex; align-items:center; gap:6px; color:#555; margin-bottom:20px; text-decoration:none;">
    <span style="font-size:18px;">←</span> 
    <span style="font-size:14px;">대시보드로</span>
  </a>

  <!-- 제목 -->
  <h1 style="font-size:28px; font-weight:700; margin:0 0 10px 0;">교과목 목록</h1>
  <p style="color:#888; margin-bottom:30px;">
    등록된 교과목과 강의 목록입니다. 과목명을 클릭하면 상세 정보를 볼 수 있습니다.
  </p>

  <!-- 카드 컨테이너 -->
  <div style="
      background:white;
      padding:30px;
      border-radius:18px;
      box-shadow:0 6px 30px rgba(0,0,0,0.06);
  ">
    <table style="width:100%; border-collapse:collapse; font-size:14px;">
      <thead>
        <tr style="text-align:left; border-bottom:2px solid #eee;">
          <th style="padding-bottom:12px;">과목ID</th>
          <th style="padding-bottom:12px;">과목명</th>
          <th style="padding-bottom:12px;">강의ID</th>
          <th style="padding-bottom:12px;">교수</th>
          <th style="padding-bottom:12px;">요일/교시</th>
          <th style="padding-bottom:12px;">강의실</th>
          <th style="padding-bottom:12px;">기능</th>
        </tr>
      </thead>
      <tbody>
        {% for c in courses %}
        <tr style="border-bottom:1px solid #f5f5f5;">
          <td style="padding:12px 4px;">{{ c.course_id }}</td>

          <!-- ✅ 과목명 클릭 시 상세 페이지로 이동 -->
          <td style="padding:12px 4px;">
            <a href="{{ url_for('staff_course_detail', lecture_id=c.lecture_id) }}"
               style="color:#111; text-decoration:none; font-weight:500;">
              {{ c.course_name }}
            </a>
          </td>

          <td style="padding:12px 4px;">{{ c.lecture_id }}</td>
          <td style="padding:12px 4px;">{{ c.prof_name }}</td>
          <td style="padding:12px 4px;">{{ c.day_of_week }} {{ c.start_period }}~{{ c.end_period }}교시</td>
          <td style="padding:12px 4px;">
            {{ c.room_id }}<br>
            <span style="color:#666; font-size:12px;">{{ c.room_name }}</span>
          </td>
          <td style="padding:12px 4px; white-space:nowrap;">
            <a href="{{ url_for('staff_course_edit', lecture_id=c.lecture_id) }}"
               style="color:#2d6cdf; text-decoration:none; margin-right:8px;">
              수정
            </a>

            <form method="post"
                  action="{{ url_for('staff_course_delete', lecture_id=c.lecture_id) }}"
                  style="display:inline;">
              <button type="submit"
                      onclick="return confirm('정말 삭제하시겠습니까?');"
                      style="
                        background:#f2f2f2;
                        border:none;
                        padding:6px 10px;
                        border-radius:6px;
                        cursor:pointer;
                        font-size:12px;
                      ">
                삭제
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- 새 교과목 -->
  <div style="text-align:center; margin-top:20px;">
    <a href="{{ url_for('staff_course_new') }}"
       style="color:#333; text-decoration:none; font-size:14px;">
      새 교과목 추가하기
    </a>
  </div>

</div>
{% endblock %}
