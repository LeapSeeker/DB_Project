{% extends "base.html" %}

{% block title %}í•™ìƒ ì‹œê°„í‘œ | ìˆ˜ê°•ì‹ ì²­ ì‹œìŠ¤í…œ{% endblock %}

{% block content %}
<style>
  /* ì‹œê°„í‘œ ì „ì²´ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
  .tt-table {
    width: 100%;
    min-width: 700px;
    border-collapse: collapse;
    font-size: 12px;
    table-layout: fixed; /* ì¹¸ ë„ˆë¹„ ì¼ì •í•˜ê²Œ */
  }

  .tt-table th,
  .tt-table td {
    padding: 10px 8px;
    height: 56px;              /* í•œ ì¤„ ë†’ì´ ê³ ì • */
    vertical-align: middle;    /* ì„¸ë¡œ ê°€ìš´ë° ì •ë ¬ */
    border-right: 1px solid #f0f0f0;
    border-bottom: 1px solid #f5f5f5;
    word-break: keep-all;
    overflow: hidden;
  }

  .tt-table thead th {
    background: #fafafa;
    font-weight: 600;
  }

  .tt-slot-title {
    font-weight: 600;
    font-size: 12px;
  }

  .tt-slot-sub {
    font-size: 11px;
    color: #666;
    margin-top: 2px;
  }

  .tt-col-header {
    text-align: center;
    white-space: nowrap;
  }
</style>

<div style="max-width: 1100px; margin: 0 auto; padding: 40px 0;">

  <!-- ğŸ”™ ë’¤ë¡œê°€ê¸°(ëŒ€ì‹œë³´ë“œë¡œ) -->
  <a href="{{ url_for('student_dashboard') }}"
     style="display:inline-flex; align-items:center; gap:6px;
            padding:6px 12px; border-radius:999px;
            border:1px solid #ddd; font-size:13px;
            color:#555; text-decoration:none; margin-bottom:16px;">
    <span style="font-size:16px;">â†</span>
    <span>ëŒ€ì‹œë³´ë“œë¡œ</span>
  </a>

  <h1 style="font-size:24px; font-weight:700; margin:0 0 6px 0;">
    í•™ìƒë³„ ì‹œê°„í‘œ
  </h1>

  {% if student %}
  <p style="color:#888; margin-bottom:18px;">
    {{ student.name }}({{ student.student_id }}) Â· {{ student.grade }}í•™ë…„ Â· {{ student.program_type }}
  </p>
  {% endif %}

  {% set days = ["ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "] %}

  <div style="
      background:white;
      padding:20px;
      border-radius:18px;
      box-shadow:0 6px 30px rgba(0,0,0,0.06);
  ">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
      <span style="font-size:13px; color:#777;">
        ìˆ˜ê°•ì‹ ì²­í•œ êµê³¼ëª© ê¸°ì¤€ìœ¼ë¡œ ìë™ ìƒì„±ëœ ì‹œê°„í‘œì…ë‹ˆë‹¤.
      </span>
    </div>

    <div style="overflow-x:auto;">
      <table class="tt-table">
        <thead>
          <tr>
            <th class="tt-col-header">êµì‹œ/ìš”ì¼</th>
            {% for d in days %}
              <th class="tt-col-header">{{ d }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for p in range(1, max_period + 1) %}
          <tr>
            <!-- êµì‹œ í‘œì‹œ -->
            <th class="tt-col-header">
              {{ p }}êµì‹œ
            </th>

            <!-- ìš”ì¼ë³„ ì¹¸ -->
            {% for d in days %}
            <td>
              {% for r in regs %}
                {% if r.day_of_week == d and r.start_period <= p and r.end_period >= p %}
                  <div>
                    <div class="tt-slot-title">
                      {{ r.course_name }}
                    </div>
                    <div class="tt-slot-sub">
                      {{ r.room_id }} Â· {{ r.prof_name }}
                    </div>
                  </div>
                {% endif %}
              {% endfor %}
            </td>
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {% if not regs or regs|length == 0 %}
      <p style="font-size:12px; color:#777; margin-top:10px;">
        ì•„ì§ ì‹ ì²­í•œ êµê³¼ëª©ì´ ì—†ì–´ ì‹œê°„í‘œê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.
      </p>
    {% endif %}
  </div>
</div>

{% endblock %}