{% extends "base.html" %}

{% block title %}ìˆ˜ê°•ì‹ ì²­ í•˜ê¸° | ìˆ˜ê°•ì‹ ì²­ ì‹œìŠ¤í…œ{% endblock %}

{% block content %}
<div style="max-width: 1100px; margin: 0 auto; padding: 40px 0;">

  <!-- ğŸ”™ ëŒ€ì‹œë³´ë“œë¡œ ë’¤ë¡œê°€ê¸° -->
  <a href="{{ url_for('student_dashboard') }}"
     style="display:inline-flex; align-items:center; gap:6px;
            color:#555; text-decoration:none; margin-bottom:18px;">
    <span style="font-size:18px;">â†</span>
    <span style="font-size:14px;">ëŒ€ì‹œë³´ë“œë¡œ</span>
  </a>

  <!-- íƒ€ì´í‹€ -->
  <h1 style="font-size:28px; font-weight:700; margin:0 0 10px 0;">
    {{ year }}ë…„ë„ {{ term }} ìˆ˜ê°•ì‹ ì²­
  </h1>
  <p style="color:#777; margin-bottom:18px; font-size:14px;">
    í˜„ì¬ ë¡œê·¸ì¸í•œ í•™ìƒ ì •ë³´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìˆ˜ê°• ê°€ëŠ¥í•œ êµê³¼ëª©ì„ ì¡°íšŒí•©ë‹ˆë‹¤.
  </p>

  {% if error %}
    <div style="background:#fff0f0; border:1px solid #f5b2b2;
                padding:10px 14px; border-radius:8px;
                color:#b00000; font-size:13px; margin-bottom:18px;">
      {{ error }}
    </div>
  {% endif %}

  <!-- ìƒë‹¨ í•™ìƒ ì •ë³´ -->
  <div style="background:white; border-radius:16px;
              box-shadow:0 6px 26px rgba(0,0,0,0.06);
              padding:18px 22px; margin-bottom:24px;">

    <div style="display:flex; flex-wrap:wrap; gap:16px; font-size:13px;">

      <div>
        <div style="color:#999; margin-bottom:3px;">í•™ë²ˆ</div>
        <div style="font-weight:600;">{{ student.student_id }}</div>
      </div>

      <div>
        <div style="color:#999; margin-bottom:3px;">ì´ë¦„</div>
        <div style="font-weight:600;">{{ student.name }}</div>
      </div>

      <div>
        <div style="color:#999; margin-bottom:3px;">í•™ë…„ / ë°˜</div>
        <div style="font-weight:600;">
          {{ grade }}í•™ë…„
          {% if class_no %}
            &nbsp;{{ class_no }}ë°˜
          {% endif %}
        </div>
      </div>

      <div>
        <div style="color:#999; margin-bottom:3px;">ê³¼ì •</div>
        <div style="font-weight:600;">{{ student.program_type }}</div>
      </div>

      <div>
        <div style="color:#999; margin-bottom:3px;">ì‹ ì²­ í•™ê¸°</div>
        <div style="font-weight:600;">{{ year }}ë…„ {{ term }}</div>
      </div>

    </div>

    <div style="margin-top:14px; font-size:12px; color:#888;">
      â–ª í˜„ì¬ í•™ë…„Â·ë°˜(ì˜ˆ: {{ grade }}í•™ë…„{% if class_no %} {{ class_no }}ë°˜{% endif %})ì— í•´ë‹¹í•˜ëŠ” ê°•ì˜ê°€
      ëª©ë¡ ìƒë‹¨ì— ë¨¼ì € ì •ë ¬ë©ë‹ˆë‹¤.<br>
      â–ª ê·¸ ë‹¤ìŒ ê°™ì€ í•™ë…„ì˜ ë‹¤ë¥¸ ë°˜ ê°•ì˜, ë§ˆì§€ë§‰ìœ¼ë¡œ ë‹¤ë¥¸ í•™ë…„ ê°•ì˜ ìˆœìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
    </div>
  </div>

  <!-- ìˆ˜ê°•ì‹ ì²­ ê°€ëŠ¥ ê³¼ëª© ëª©ë¡ -->
  <div style="background:white; border-radius:18px;
              box-shadow:0 6px 26px rgba(0,0,0,0.05);
              padding:20px 24px;">

    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
      <h2 style="font-size:18px; margin:0;">ìˆ˜ê°•ì‹ ì²­ ëŒ€ìƒ êµê³¼ëª©</h2>
      <span style="font-size:12px; color:#777;">
        ì´ {{ lectures|length }}ê°œ ê°•ì˜
      </span>
    </div>

    {% if lectures %}
      <table style="width:100%; border-collapse:collapse; font-size:13px;">
        <thead>
          <tr style="border-bottom:2px solid #f1f1f1;">
            <th style="text-align:left; padding:8px 4px;">ê³¼ëª©ID</th>
            <th style="text-align:left; padding:8px 4px;">ê³¼ëª©ëª…</th>
            <th style="text-align:left; padding:8px 4px;">ëŒ€ìƒ í•™ë…„/ë°˜</th>
            <th style="text-align:left; padding:8px 4px;">ìš”ì¼/êµì‹œ</th>
            <th style="text-align:left; padding:8px 4px;">ê°•ì˜ì‹¤</th>
            <th style="text-align:left; padding:8px 4px;">ë‹´ë‹¹êµìˆ˜</th>
            <th style="text-align:center; padding:8px 4px; width:90px;">ì‹ ì²­</th>
          </tr>
        </thead>
        <tbody>
          {% for lec in lectures %}
          <tr style="border-bottom:1px solid #f5f5f5;">
            <td style="padding:8px 4px;">
              {{ lec.course_id }}
            </td>

            <td style="padding:8px 4px;">
              {{ lec.course_name }}
            </td>

            <td style="padding:8px 4px;">
              {% if lec.target_grade %}
                {{ lec.target_grade }}í•™ë…„
              {% else %}
                -
              {% endif %}
              {% if lec.class_no %}
                &nbsp;{{ lec.class_no }}ë°˜
              {% endif %}
            </td>

            <td style="padding:8px 4px;">
              {{ lec.day_of_week }} {{ lec.start_period }}~{{ lec.end_period }}êµì‹œ
            </td>

            <td style="padding:8px 4px;">
              {{ lec.room_id }}
              {% if lec.room_name %}
                <span style="color:#666;"> ({{ lec.room_name }})</span>
              {% endif %}
            </td>

            <td style="padding:8px 4px;">
              {{ lec.prof_name or '-' }}
            </td>

            <td style="text-align:center; padding:8px 4px;">
              {% if lec.lecture_id in registered_ids %}
                <!-- âœ… ì´ë¯¸ ì‹ ì²­ëœ ê°•ì˜ë©´: ìˆ˜ê°• ì™„ë£Œ ë²„íŠ¼ (ë¹„í™œì„±) -->
                <button type="button"
                        style="border:none; background:#e5e5e5; color:#666;
                               padding:6px 12px; border-radius:999px;
                               font-size:12px; cursor:default;">
                  ì‹ ì²­ ì™„ë£Œ
                </button>
              {% else %}
                <!-- âœ… ì•„ì§ ì‹ ì²­ ì•ˆ í•œ ê°•ì˜ë©´: ì‹ ì²­ ë²„íŠ¼ -->
                <form method="post" style="margin:0;">
                  <input type="hidden" name="lecture_id" value="{{ lec.lecture_id }}">
                  <button type="submit"
                          style="border:none; background:#111; color:#fff;
                                 padding:6px 12px; border-radius:999px;
                                 font-size:12px; cursor:pointer;">
                    ì‹ ì²­
                  </button>
                </form>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p style="font-size:13px; color:#777; margin:4px 0 0 0;">
        í˜„ì¬ ìˆ˜ê°•ì‹ ì²­ ê°€ëŠ¥í•œ êµê³¼ëª©ì´ ì—†ìŠµë‹ˆë‹¤.
      </p>
    {% endif %}
  </div>
</div>
{% endblock %}
